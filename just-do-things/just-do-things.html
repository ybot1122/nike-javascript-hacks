<head>
  <title>SMAKCK TALCKK</title>
</head>

<body>
    <div id="rivalry-list">
        <h2>Active Rivalries</h2>
        {{> activelist}}
    </div>
    <div id="active-rivalry">
        <h2>SMACKIN TALK n TALKIN SMACK</h2>
        {{> activebox}}
    </div>
</body>

<template name="activelist">
    {{#each rivalries}}
        <div class="rivalry-item hvr-pulse-shrink" data-a={{a}} data-b={{b}}>
            {{a}} <span>versus</span> {{b}}
        </div>
    {{/each}}
</template>

<template name="activebox">
    {{#with data}}
        {{> comparison}}
    {{/with}}
</template>

<template name="expandables">
    {{#each rival}}
        {{#if data (a) (b)}}
            {{#with data (a) (b)}}
                {{> close}}
                {{> comparison}}
            {{/with}}
        {{else}}
            <div class="clickable" data-a={{a}} data-b={{b}}>
                {{a}} versus {{b}}
            </div>
        {{/if}}
    {{/each}}
</template>

<template name="rivalry">
    {{#each rival}}
        {{> comparison}}
    {{/each}}
</template>

<template name="close">
    <div class="close" data-a={{left.name}} data-b={{right.name}}>
        CLOSE
    </div>
</template>

<template name="comparison">
    <div class="compare">
        {{#with left}}
            {{> column}}
        {{/with}}
        {{#with right}}
            {{> column}}
        {{/with}}
        {{> chatroom}}
        {{> submission}}
    </div>
</template>

<template name="column">
  <div class="column">
    <h2>{{name}}</h2>
    <div class="pic">
        <img src="{{image}}" />
    </div>
  </div>
</template>

<template name="chatroom">
    <div class="chatroom">
        {{#each tweets}}
            <div class="tweet">
                <span>{{convertTime (time)}}</span>
                <span>{{message}}</span>
            </div>
        {{/each}}
    </div>
</template>

<template name="submission">
    <form class="submit" data-name={{name}}>
        <input class="talk" name="text" type="text" />
        <input class="smack" type="submit" value="send" />
    </form>
</template>